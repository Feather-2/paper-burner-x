<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>è¡¨æ ¼æ ¼å¼éªŒè¯</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            padding: 20px;
            background: #f5f5f5;
        }
        .section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
        }
        .fail { color: #e74c3c; font-weight: bold; }
        .success { color: #27ae60; font-weight: bold; }
        pre { background: #f1f3f5; padding: 15px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ” è¡¨æ ¼æ ¼å¼éªŒè¯</h1>

    <script>
        const table = `| | | | äº”åˆ†ä½æ•° (Quintiles) | | |
|---|---|---|---|---|---|---|
| | 1 | 2 | 3 | 4 | 5 | 5-1 |`;

        const lines = table.split('\n');

        document.write('<div class="section">');
        document.write('<h2>è¡¨æ ¼å†…å®¹:</h2>');
        document.write('<pre>' + table + '</pre>');

        document.write('<h2>é€è¡Œåˆ†æ:</h2>');

        lines.forEach((line, idx) => {
            const pipes = (line.match(/\|/g) || []).length;
            const cells = pipes > 0 ? pipes - 1 : 0;

            document.write(`<p><strong>ç¬¬ ${idx + 1} è¡Œ:</strong></p>`);
            document.write(`<pre>${line}</pre>`);
            document.write(`<p>ç®¡é“ç¬¦æ•°é‡: ${pipes}, å•å…ƒæ ¼æ•°é‡: ${cells}</p>`);
        });

        // åˆ†æåˆ—æ•°
        const headerPipes = (lines[0].match(/\|/g) || []).length;
        const separatorPipes = (lines[1].match(/\|/g) || []).length;
        const dataPipes = lines.length > 2 ? (lines[2].match(/\|/g) || []).length : 0;

        const headerCells = headerPipes - 1;
        const separatorCells = separatorPipes - 1;
        const dataCells = dataPipes - 1;

        document.write('<h2>åˆ—æ•°æ£€æŸ¥:</h2>');
        document.write(`<p>è¡¨å¤´å•å…ƒæ ¼: ${headerCells}</p>`);
        document.write(`<p>åˆ†éš”ç¬¦æ®µ: ${separatorCells}</p>`);
        document.write(`<p>æ•°æ®è¡Œå•å…ƒæ ¼: ${dataCells}</p>`);

        const isValid = headerCells === separatorCells && headerCells === dataCells;

        if (isValid) {
            document.write('<p class="success">âœ“ è¡¨æ ¼æ ¼å¼æœ‰æ•ˆ</p>');
        } else {
            document.write('<p class="fail">âœ— è¡¨æ ¼æ ¼å¼æ— æ•ˆï¼šåˆ—æ•°ä¸åŒ¹é…ï¼</p>');
            document.write('<p class="fail">Markdown è§£æå™¨æ— æ³•è¯†åˆ«è¿™ç§æ ¼å¼çš„è¡¨æ ¼</p>');
        }

        document.write('<h2>ğŸ’¡ è§£å†³æ–¹æ¡ˆ:</h2>');
        document.write('<p>éœ€è¦ä¿®å¤è¡¨å¤´æˆ–åˆ†éš”ç¬¦ï¼Œä½¿åˆ—æ•°ä¸€è‡´ï¼š</p>');

        // æä¾›ä¸¤ç§ä¿®å¤æ–¹æ¡ˆ
        if (headerCells < separatorCells) {
            // æ–¹æ¡ˆ1ï¼šç»™è¡¨å¤´æ·»åŠ å•å…ƒæ ¼
            const fixed1 = lines[0] + ' |';
            document.write('<p><strong>æ–¹æ¡ˆ 1ï¼šç»™è¡¨å¤´æ·»åŠ ç©ºå•å…ƒæ ¼</strong></p>');
            document.write('<pre>' + fixed1 + '</pre>');

            // æ–¹æ¡ˆ2ï¼šä»åˆ†éš”ç¬¦åˆ é™¤åˆ—
            const sepParts = lines[1].split('|');
            sepParts.pop();  // åˆ é™¤æœ€åä¸€ä¸ªç©ºå…ƒç´ 
            sepParts.pop();  // åˆ é™¤æœ€åä¸€ä¸ª ---
            const fixed2 = sepParts.join('|') + '|';
            document.write('<p><strong>æ–¹æ¡ˆ 2ï¼šä»åˆ†éš”ç¬¦åˆ é™¤ä¸€åˆ—</strong></p>');
            document.write('<pre>' + lines[0] + '\n' + fixed2 + '\n' + lines[2] + '</pre>');
        }

        document.write('</div>');
    </script>
</body>
</html>
